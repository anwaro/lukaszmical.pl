THREE.OBJLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(e,t,a,r){var s=this,n=new THREE.XHRLoader(s.manager);n.setPath(this.path),n.load(e,(function(e){t(s.parse(e))}),a,r)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},parse:function(e){console.time("OBJLoader");var t,a=[],r=!1,s=[],n=[],o=[];function i(e){t={name:e,geometry:{vertices:[],normals:[],uvs:[]},material:{name:"",smooth:!0}},a.push(t)}function l(e){var t=parseInt(e);return 3*(t>=0?t-1:t+s.length/3)}function d(e){var t=parseInt(e);return 3*(t>=0?t-1:t+n.length/3)}function u(e){var t=parseInt(e);return 2*(t>=0?t-1:t+o.length/2)}function m(e,a,r){t.geometry.vertices.push(s[e],s[e+1],s[e+2],s[a],s[a+1],s[a+2],s[r],s[r+1],s[r+2])}function f(e,a,r){t.geometry.normals.push(n[e],n[e+1],n[e+2],n[a],n[a+1],n[a+2],n[r],n[r+1],n[r+2])}function h(e,a,r){t.geometry.uvs.push(o[e],o[e+1],o[a],o[a+1],o[r],o[r+1])}function E(e,t,a,r,s,n,o,i,E,c,v,p){var g,H=l(e),R=l(t),T=l(a);void 0===r?m(H,R,T):(m(H,R,g=l(r)),m(R,T,g)),void 0!==s&&(H=u(s),R=u(n),T=u(o),void 0===r?h(H,R,T):(h(H,R,g=u(i)),h(R,T,g))),void 0!==E&&(H=d(E),R=d(c),T=d(v),void 0===r?f(H,R,T):(f(H,R,g=d(p)),f(R,T,g)))}i("");for(var c=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,v=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,p=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,H=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,R=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,T=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,w=/^[og]\s+(.+)/,F=/^s\s+([01]|on|off)/,x=e.split("\n"),y=0;y<x.length;y++){var A,B=x[y];if(0!==(B=B.trim()).length&&"#"!==B.charAt(0))if(null!==(A=c.exec(B)))s.push(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));else if(null!==(A=v.exec(B)))n.push(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));else if(null!==(A=p.exec(B)))o.push(parseFloat(A[1]),parseFloat(A[2]));else if(null!==(A=g.exec(B)))E(A[1],A[2],A[3],A[4]);else if(null!==(A=H.exec(B)))E(A[2],A[5],A[8],A[11],A[3],A[6],A[9],A[12]);else if(null!==(A=R.exec(B)))E(A[2],A[6],A[10],A[14],A[3],A[7],A[11],A[15],A[4],A[8],A[12],A[16]);else if(null!==(A=T.exec(B)))E(A[2],A[5],A[8],A[11],void 0,void 0,void 0,void 0,A[3],A[6],A[9],A[12]);else if(null!==(A=w.exec(B))){var b=A[1].trim();!1===r?(r=!0,t.name=b):i(b)}else if(/^usemtl /.test(B))t.material.name=B.substring(7).trim();else if(/^mtllib /.test(B));else{if(null===(A=F.exec(B)))throw new Error("Unexpected line: "+B);t.material.smooth="1"===A[1]||"on"===A[1]}}for(var L=new THREE.Group,J=(y=0,a.length);y<J;y++){var M,O=(t=a[y]).geometry,I=new THREE.BufferGeometry;I.addAttribute("position",new THREE.BufferAttribute(new Float32Array(O.vertices),3)),O.normals.length>0?I.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(O.normals),3)):I.computeVertexNormals(),O.uvs.length>0&&I.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(O.uvs),2)),null!==this.materials&&(M=this.materials.create(t.material.name)),M||((M=new THREE.MeshPhongMaterial).name=t.material.name),M.shading=t.material.smooth?THREE.SmoothShading:THREE.FlatShading;var P=new THREE.Mesh(I,M);P.name=t.name,L.add(P)}return console.timeEnd("OBJLoader"),L}};