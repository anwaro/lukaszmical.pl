ENGINE={},ENGINE.cal=function(){for(var t=100,e=100,E=0,o=0,r=SET.nemStratum-1;r>-1;r--)o=(E=e-(t=e*SET.stratumVal[r].ir))/e,SET.IR[r].przech=t.toFixed(2),SET.IR[r].odbi=E.toFixed(2),SET.IR[r].albedo=o.toFixed(2),e=t;SET.tauIR=t/100,e=100;for(r=0;r<SET.nemStratum;r++)o=(E=e-(t=e*SET.stratumVal[r].vis))/e,SET.Vis[r].przech=t.toFixed(2),SET.Vis[r].odbi=E.toFixed(2),SET.Vis[r].albedo=o.toFixed(2),e=t;SET.tauVis=t/100,SET.temp=Math.pow(SET.sun*(1-SET.wAlbedo)*(1+SET.tauVis)/(SET.boltz*(1+SET.tauIR)),1/4)-273,document.getElementById("tmperature").innerHTML=SET.temp.toFixed(2)+"&deg;C",document.getElementById("tmperature").style.color=ENGINE.setTempColor(SET.temp)},ENGINE.setTempColor=function(t){var e;return t<0?(t=t<-20?-20:t,"rgb( 0,"+(255-2*(e=parseInt(254*Math.abs(t/20)*.5)))+", "+(255-e)+")"):(t=t>30?-30:t,"rgb( "+(126+(e=parseInt(254*Math.abs(t/30)*.5)))+" ,0,0)")};