function Point(t,i){this.x=t||0,this.y=i||0}function Box(t,i,n){this.el=t,this.old=new Point(i,n),this.direction=new Point,this.current=new Point(i,n),this.step=new Point}$$div=new function(){var t=[],i=[],n=[],e=100,r=!1;function c(){if(!r){r=!0;for(var c=function(t){var i=[],n=JSON.parse(JSON.stringify(t));for(;n.length;){var e=Math.floor(Math.random()*n.length);i.push(n[e]),n.splice(e,1)}return i}(i),o=0,d=0,a=0;o<n.length;o++){a=o%5,o&&!a&&d++;var l=t[c[o]-1];l.direction.x=a*e,l.direction.y=d*e,l.step.x=(l.direction.x-l.current.x)/50,l.step.y=(l.direction.y-l.current.y)/50}s()}}function o(){if(!r){r=!0;for(var i=0;i<n.length;i++){var e=t[i];e.direction.x=e.old.x,e.direction.y=e.old.y,e.step.x=(e.direction.x-e.current.x)/50,e.step.y=(e.direction.y-e.current.y)/50}s()}}function s(){for(var i=!0,n=0;n<t.length;n++){var e=t[n];Math.abs(e.direction.x-e.current.x)>2*Math.abs(e.step.x)?(i=!1,e.current.x+=e.step.x):e.current.x=e.direction.x,Math.abs(e.direction.y-e.current.y)>2*Math.abs(e.step.y)?(i=!1,e.current.y+=e.step.y):e.current.y=e.direction.y,e.el.css({left:e.current.x+"px",top:e.current.y+"px"})}i?r=!1:window.setTimeout(s,20)}this.init=function(){for(var r in alldiv=$$("#allDivs"),alldiv.addEventListener("click",c,!1),$$("#reset").addEventListener("click",o,!1),alldiv.childNodes)"DIV"===alldiv.childNodes[r].tagName&&(n.push(alldiv.childNodes[r]),i.push(n.length));r=0;for(var s=0,d=0;r<n.length;r++){d=r%5,r&&!d&&s++;var a=$$("#div"+(r+1));a.css({top:s*e+"px",left:d*e+"px",background:"url(https://c2.staticflickr.com/6/5447/9001563192_c745c5d275.jpg) -"+d*e+"px -"+s*e+"px"}),t.push(new Box(a,d*e,s*e))}}},$$div.init();