_graph=new function(){var t,a;function e(t,a){return t[0]<a[0]?-1:t[0]>a[0]?1:0}function i(t,a){return t[1]<a[1]?-1:t[1]>a[1]?1:0}function r(t,e,i,r,l,n,h){a.save(),a.beginPath(),a.lineWidth=1,a.fillStyle=g(n,0),a.strokeStyle=g(n,0),a.moveTo(t,e),a.lineTo(t,e+r),a.lineTo(t+i,e+r),a.lineTo(t+i,e),a.lineTo(t,e),a.stroke(),a.fill(),a.restore(),h&&(a.fillStyle=g(n,-.2),a.strokeStyle=g(n,0),a.beginPath(),a.moveTo(t,e),a.lineTo(t+l,e-l),a.lineTo(t+i+l,e-l),a.lineTo(t+i,e),a.lineTo(t,e),a.stroke(),a.fill(),a.beginPath(),a.moveTo(t+i,e),a.lineTo(t+i+l,e-l),a.lineTo(t+i+l,e+r-l),a.lineTo(t+i,e+r),a.lineTo(t+i,e),a.stroke(),a.fill())}function l(t,e,i,r,l,g){a.textAlign="center",a.font=graph.defaultsetings.valSize+"px Courier New",g?l?(a.textBaseline="bottom",a.fillText(t,e+r/2,i-graph.col.margin)):(a.fillStyle="white",a.textBaseline="top",a.fillText(t,e+r/2,i+5)):(a.font=graph.defaultsetings.labelSize+"px Courier New",a.textBaseline="top",a.fillStyle=graph.defaultsetings.labelColor,a.fillText(t,e+r/2,i))}function g(t,a){return function(t,a){(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),a=a||0;var e,i,r="#";for(i=0;i<3;i++)e=parseInt(t.substr(2*i,2),16),r+=("00"+(e=Math.round(Math.min(Math.max(0,e+e*a),255)).toString(16))).substr(e.length);return r}(graph.col.color[t%graph.col.color.length],a)}graph={},graph.data={},graph.col={color:["#EF6969","#93EC30","#ECB230","#30ECDB","#9B30EC","#B12485","#2470B1"]},this.init=function(g,n,h){t=g,graph.defaultsetings.canvasWidth=t.width,graph.defaultsetings.canvasHeight=t.height,a=t.getContext("2d"),function(t){if("object"==typeof t)for(var a in t)graph.defaultsetings[a]=t[a]}(h),function(t){(function(t){for(var a=t[0][1],e=0;e<t.length;e++)t[e][1]>a&&(a=t[e][1]);graph.data.max=a})(t),function(t){for(var a=t[0][1],e=0;e<t.length;e++)t[e][1]<a&&(a=t[e][1]);graph.data.min=a}(t),graph.data.data=t,graph.defaultsetings.sortByLabel&&(graph.data.data=t.sort(e));graph.defaultsetings.sortByValue&&(graph.data.data=t.sort(i));graph.data.len=t.length}(n),t.width=graph.defaultsetings.canvasWidth,t.height=graph.defaultsetings.canvasHeight,function(){(function(){var t=graph.defaultsetings.canvasWidth-2*graph.defaultsetings.margin;t/=graph.data.len,graph.col.margin=.1*t,graph.col.width=.8*t,graph.col.x=t;var a=graph.defaultsetings.canvasHeight-2*graph.defaultsetings.margin;a-=graph.defaultsetings.title?20+graph.defaultsetings.titleSize:0,a-=graph.defaultsetings.labelSize,graph.defaultsetings.threeD&&(a-=graph.col.margin,graph.col.width-=graph.col.margin/graph.data.len);graph.col.y=a,graph.col.ratio=a/graph.data.max})(),a.fillStyle=graph.defaultsetings.bgColor,a.fillRect(0,0,graph.defaultsetings.canvasWidth,graph.defaultsetings.canvasHeight),graph.defaultsetings.borderWidth&&(a.strokeStyle=graph.defaultsetings.borderColor,a.lineWidth=2*graph.defaultsetings.borderWidth,a.beginPath(),a.moveTo(0,0),a.lineTo(0,graph.defaultsetings.canvasHeight),a.lineTo(graph.defaultsetings.canvasWidth,graph.defaultsetings.canvasHeight),a.lineTo(graph.defaultsetings.canvasWidth,0),a.lineTo(0,0),a.stroke());var t=graph.defaultsetings.margin+graph.defaultsetings.titleSize;graph.defaultsetings.threeD&&(t+=graph.col.margin);t+=graph.defaultsetings.title?20:0;for(var e=graph.defaultsetings.margin,i=0,g=0;g<graph.data.data.length;g++)r(e+=graph.col.margin,i=graph.col.y-graph.data.data[g][1]*graph.col.ratio+t,graph.col.width,graph.data.data[g][1]*graph.col.ratio,graph.col.margin,g,graph.defaultsetings.threeD),l(graph.data.data[g][1],e,i,graph.col.width,graph.data.data[g][1]<graph.data.max/2,1),l(graph.data.data[g][0],e,t+graph.col.y,graph.col.width,0,0),e+=graph.col.width,e+=graph.col.margin;""!==graph.defaultsetings.title&&(a.textAlign="center",a.textBaseline="top",a.fillStyle=graph.defaultsetings.titleColor,a.font=graph.defaultsetings.titleSize+"px Courier New",a.fillText(graph.defaultsetings.title,graph.defaultsetings.canvasWidth/2,graph.defaultsetings.margin))}()},this.getSettings=function(){return graph.defaultsetings},graph.defaultsetings={title:" ",titleSize:25,titleColor:"",bgColor:"#C5C5C5",margin:5,labelSize:20,labelColor:"black",valSize:20,borderWidth:1,borderColor:"#282828",sortByValue:!1,sortByLabel:!1,threeD:!1,canvasWidth:300,canvasHeight:300}},HTMLCanvasElement.prototype.graph=function(t,a){_graph.init(this,t,a)};