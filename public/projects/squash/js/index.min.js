let i={BlockWidth:50,BlockHeight:25,NumX:10,NumY:4,boardX:0,boardY:0,boardYwithMenu:0,MenuY:50,Score:0,Level:1,Life:3,pause:!0,NumTrance:70,titleFontSize:"bold 24px Georgia",MenuFontSize:"bold 20px Georgia"},s=(i.boardX=i.BlockWidth*i.NumX,i.boardY=i.BlockHeight*i.NumY+300,i.boardYwithMenu=i.boardY+i.MenuY,{MouseX:i.boardX/2,PrevMouse:0,PrevMouse2:0,dM:0,dM2:0}),r={width:100,height:20,posX:160,posY:i.boardYwithMenu-25};function o(o,e){this.posX=i.boardX/2,this.posY=300,this.color=o,this.dX=Math.pow(-1,Math.ceil(10*Math.random())%10)*(3*Math.random()+2),this.dY=-9,this.radius=e}function e(o,e){this.posX=o,this.posY=e,this.display=0}let d,a,l,p,Y,n,u,X=0,h,c,M,f=[],b=[],g=[],S=new o("rgb(255,50,0)",9);for(var t=0;t<i.NumTrance;t++)b[t]=new o("rgb(255,"+(80+t)+",0)",S.radius-(S.radius-1)/i.NumTrance*(t+1));for(var w,m,t=0;t<i.NumX;t++){g[t]=[];for(var y=0;y<i.NumY;y++)g[t][y]=new e(t*i.BlockWidth,y*i.BlockHeight+i.MenuY),g[t][y].display=1}function k(){if(i.pause){a.clearRect(0,0,i.boardX,i.boardYwithMenu),a.fillStyle=c,a.beginPath(),a.rect(0,0,i.boardX,i.boardYwithMenu),a.closePath(),a.fill(),a.fillStyle=h,a.beginPath(),a.rect(0,0,i.boardX,i.MenuY),a.closePath(),a.fill(),B(),n=r.posY-r.width/2*Math.sin(X),p=r.posX+r.height/2-r.width/2,u=r.posY+r.width/2*Math.sin(X),Y=r.posX+r.width/2-r.height/2,a.beginPath(),a.moveTo(p,n),a.lineTo(Y,u),a.lineWidth=r.height,a.strokeStyle=M,a.lineCap="round",a.stroke();for(var e=0;e<i.NumX;e++)for(let o=0;o<i.NumY;o++)0<g[e][o].display&&(a.fillStyle=f[g[e][o].display],a.beginPath(),a.rect(g[e][o].posX+1,g[e][o].posY+1,i.BlockWidth-2,i.BlockHeight-2),a.closePath(),a.fill());for(e=i.NumTrance-1;1<e;e--)a.beginPath(),a.arc(b[e].posX,b[e].posY,b[e].radius,0,2*Math.PI,!1),a.fillStyle=b[e].color,a.fill();a.beginPath(),a.arc(S.posX,S.posY,S.radius,0,2*Math.PI,!1),a.fillStyle=S.color,a.fill(),B(),s.MouseX<r.width/2?r.posX=r.width/2:s.MouseX>i.boardX-r.width/2?r.posX=i.boardX-r.width/2:r.posX=s.MouseX,S.posX+=S.dX,S.posY+=S.dY;for(let e=0;e<i.NumX;e++)for(let o=0;o<i.NumY;o++)0<g[e][o].display&&(0<S.dY&&0<S.dX&&g[e][o].posX<=S.posX+S.radius&&S.posX+S.radius<=g[e][o].posX+i.BlockWidth&&g[e][o].posY<=S.posY+S.radius&&S.posY+S.radius<=g[e][o].posY+i.BlockHeight&&(g[e][o].display--,i.Score++,g[e][o].posY<=S.posY&&S.posY<=g[e][o].posY+i.BlockHeight?S.dX=-S.dX:S.dY=-S.dY),0<S.dY&&S.dX<0&&g[e][o].posX<=S.posX-S.radius&&S.posX-S.radius<=g[e][o].posX+i.BlockWidth&&g[e][o].posY<=S.posY+S.radius&&S.posY+S.radius<=g[e][o].posY+i.BlockHeight&&(g[e][o].display--,i.Score++,g[e][o].posY<=S.posY&&S.posY<=g[e][o].posY+i.BlockHeight?S.dX=-S.dX:S.dY=-S.dY),S.dY<0&&S.dX<0&&g[e][o].posX<=S.posX-S.radius&&S.posX-S.radius<=g[e][o].posX+i.BlockWidth&&g[e][o].posY<=S.posY-S.radius&&S.posY-S.radius<=g[e][o].posY+i.BlockHeight&&(g[e][o].display--,i.Score++,g[e][o].posY<=S.posY&&S.posY<=g[e][o].posY+i.BlockHeight?S.dX=-S.dX:S.dY=-S.dY),S.dY<0)&&0<S.dX&&g[e][o].posX<=S.posX+S.radius&&S.posX+S.radius<=g[e][o].posX+i.BlockWidth&&g[e][o].posY<=S.posY-S.radius&&S.posY-S.radius<=g[e][o].posY+i.BlockHeight&&(g[e][o].display--,i.Score++,g[e][o].posY<=S.posY&&S.posY<=g[e][o].posY+i.BlockHeight?S.dX=-S.dX:S.dY=-S.dY);var o=(n-u)/(p-Y),d=n-o*p,t=X/.35*.5;S.posY+S.radius>=i.boardYwithMenu-60&&(S.posX>=p-r.height/2&&S.posX<=Y+r.height/2&&S.posX*o+d-r.height/2<=S.posY+S.dY+S.radius&&0<S.dY&&(0<X&&(0<S.dX?(S.dX=S.dX+t*S.dX,S.dY=-(S.dY-t*S.dY)):(S.dX=S.dX-t*S.dX,S.dY=-(S.dY+t*S.dY))),X<0&&(0<S.dX?(S.dX=S.dX-t*S.dX,S.dY=-(S.dY+t*S.dY)):(S.dX=S.dX+t*S.dX,S.dY=-(S.dY-t*S.dY))),0===X)&&(S.dY=-S.dY),S.posY+S.dY>i.boardYwithMenu-2*S.radius)&&(i.Life--,C(),L(),i.pause=!1),(S.posX+S.dX>i.boardX-S.radius||S.posX+S.dX<S.radius)&&(S.dX=-S.dX),(S.posY+S.dY>i.boardYwithMenu-S.radius||S.posY+S.dY<i.MenuY+S.radius)&&(S.dY=-S.dY);for(let o=i.NumTrance-1;0<o;o--)b[o].posX=b[o-1].posX,b[o].posY=b[o-1].posY;b[0].posX=S.posX,b[0].posY=S.posY;{let d=!0;for(let e=0;e<i.NumX;e++)for(let o=0;o<i.NumY;o++)0<g[e][o].display&&(d=!1);d&&(i.Level++,i.Life+=2,i.Score+=10,v(),C(),L(),i.pause=!1,a.font=i.titleFontSize,a.fillStyle="white",a.fillText("Press s to continue",(i.boardX-240)/2,290)),i.Life<1&&(clearInterval(l),a.font=i.titleFontSize,a.fillStyle="white",a.fillText("GAME OVER",(i.boardX-140)/2,290))}}}function B(){a.font=i.MenuFontSize,a.fillStyle="white",a.fillText("Life: "+i.Life,10,30),a.fillText("Level: "+i.Level,i.boardX/2-70,30),a.fillText("Score: "+i.Score,i.boardX-140,30)}function v(){if(i.Level<4)for(let e=0;e<i.NumX;e++)for(let o=0;o<i.NumY;o++)g[e][o].display=i.Level}function C(){S.dX=Math.pow(-1,Math.ceil(10*Math.random())%10)*(3*Math.random()+2),S.dY=-9,S.posX=s.MouseX,S.posY=r.posY-2*S.radius}function L(){for(let o=i.NumTrance-1;0<=o;o--)b[o].posX=S.posX,b[o].posY=S.posY}function N(o){83===o.keyCode&&(i.pause=!0)}w=document.querySelector("#PlayGame"),m=document.querySelector("#game"),w&&(w.style.display="none",w.style.marginTop="140px",w.style.marginLeft=(i.boardX-w.clientWidth)/2+"px",w.style.marginTop="200px"),m&&(m.style.width=i.boardYwithMenu+"px",m.style.width=i.boardX+"px"),v(),C(),L(),i.Life=3,i.Score=0,(d=document.getElementById("squash")).height=i.boardYwithMenu,d.width=i.boardX,d.getContext&&(a=d.getContext("2d"),(h=a.createLinearGradient(0,0,0,i.MenuY)).addColorStop(0,"#99BAEB"),h.addColorStop(.5,"#0052CC"),h.addColorStop(1,"#99BAEB"),(c=a.createLinearGradient(0,0,0,i.boardYwithMenu)).addColorStop(0,"#AD8DEE"),c.addColorStop(.4,"#68558F"),c.addColorStop(1,"#AD8DEE"),(M=a.createLinearGradient(0,i.boardYwithMenu-30,0,i.boardYwithMenu)).addColorStop(0,"#FFA319"),M.addColorStop(.4,"#CC0000"),M.addColorStop(1,"#FFA319"),f[1]=a.createLinearGradient(0,0,0,i.BlockHeight*i.NumY+i.MenuY),f[1].addColorStop(0,"yellow"),f[1].addColorStop(.4,"orange"),f[1].addColorStop(1,"yellow"),f[2]=a.createLinearGradient(0,0,0,i.BlockHeight*i.NumY+i.MenuY),f[2].addColorStop(0,"red"),f[2].addColorStop(.4,"brown"),f[2].addColorStop(1,"red"),f[3]=a.createLinearGradient(0,0,0,i.BlockHeight*i.NumY+i.MenuY),f[3].addColorStop(0,"brown"),f[3].addColorStop(.4,"black"),f[3].addColorStop(1,"brown"),l=setInterval(k,20),window.addEventListener("keydown",N,!0),d.addEventListener("mousemove",function(o){var e=d;e=e.getBoundingClientRect(),o=o.clientX-e.left,s.PrevMouse2=s.PrevMouse,s.PrevMouse=s.MouseX,s.MouseX=o,s.dM=s.MouseX-s.PrevMouse,s.dM2=s.PrevMouse-s.PrevMouse2,30<Math.abs((s.dM+s.dM2)/2)&&(s.dM=Math.abs((s.dM+s.dM2)/2)/((s.dM+s.dM2)/2)*30),X=(s.dM+s.dM2)/2*3.14/180},!1),d.addEventListener("click",function(){i.pause=!0},!1));