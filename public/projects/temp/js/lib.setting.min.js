var SET = SET || {};
for (i in (((SET = {
    boltz: 5.67e-8,
    sun: 343.5,
    wAlbedo: 0.3,
    tauIR: 0.3,
    tauVis: 0.5,
    nemStratum: 1,
    stratumVal: [
        {ir: 0.2, vis: 0.8},
        {ir: 0.2, vis: 0.8},
        {ir: 0.2, vis: 0.8},
        {ir: 0.2, vis: 0.8},
        {ir: 0.2, vis: 0.8},
    ],
    all_IR: 0.5,
    IR: [
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
    ],
    all_Vis: 0.5,
    Vis: [
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
        {przech: 0.5, odbi: 0.5, albedo: 0.5},
    ],
    x: 300,
    y: 300,
    ran: [],
    temp: 10,
}).nam = [
    '/projects/temp/image/crops.png',
    '/projects/temp/image/desert.png',
    '/projects/temp/image/forest.png',
    '/projects/temp/image/ice.png',
    '/projects/temp/image/meadow.png',
    '/projects/temp/image/snow.png',
    '/projects/temp/image/soil.png',
    '/projects/temp/image/sun.png',
    '/projects/temp/image/water.png',
]),
(SET.img = []),
SET.nam)) {
    var img = new Image();
    (img.src = SET.nam[i]), SET.img.push(img);
}
SET.ground = 6;
for (var k = 0; k < 3e4; k++) SET.ran.push(Math.random());
(SET.checkAlbedo1 = function () {
    document.getElementById('albedo1').checked &&
        ((SET.wAlbedo = parseFloat(
            document.querySelector('select#albedo_select option:selected').value,
        )),
        (SET.ground = parseInt(
            document.querySelector('select#albedo_select option:selected').dataset
                .gr,
        )));
}),
    (SET.checkAlbedo2 = function () {
        document.getElementById('albedo2').checked &&
            ((SET.wAlbedo = parseFloat(
                document.querySelector('input#albedo_val').value,
            )),
            (document.querySelector('#albedo_val_view').innerText = SET.wAlbedo),
            (SET.ground = 6));
    }),
    (SET.changeNemberOfStratum = function () {
        (SET.nemStratum = parseFloat(document.querySelector('input#atmo').value)),
            (document.querySelector('#atmo_val').innerText = SET.nemStratum),
            SET.addInputRangeStratum(),
            SET.changeValueIrAndVis();
        for (let e in SET.stratumVal)
            (SET.stratumVal[e].ir = 0.2), (SET.stratumVal[e].vis = 0.8);
    }),
    (SET.changeSunConst = function () {
        (SET.sun = parseInt(document.querySelector('input#sun_const').value) / 4),
            document
                .querySelector('#sun_const_val')
                .text(parseInt(document.querySelector('input#sun_const').value));
    }),
    (SET.addInputRangeStratum = function () {
        for (
            var e = document.getElementById('eachStratum'),
                t = document.createElement('table'),
                a = document.createElement('tbody'),
                n = 0;
            n < SET.nemStratum;
            n++
        ) {
            var d = document.createElement('tr'),
                r = document.createElement('td'),
                u = document.createTextNode(n + 1 + ' WARSTWA');
            r.setAttribute('colSpan', '3'),
                r.appendChild(u),
                (r.style.textAlign = 'center'),
                d.appendChild(r),
                a.appendChild(d),
                (d = document.createElement('tr')),
                (r = document.createElement('td')),
                (u = document.createTextNode('IR')),
                r.appendChild(u),
                d.appendChild(r),
                (r = document.createElement('td'));
            var i = document.createElement('input');
            i.setAttribute('type', 'range'),
                i.setAttribute('min', '0'),
                i.setAttribute('max', '1'),
                i.setAttribute('step', '0.01'),
                i.setAttribute('value', '0.2'),
                i.setAttribute('data-tau', 'IR'),
                i.setAttribute('data-index', n),
                i.setAttribute('id', 't_IR_' + n),
                r.appendChild(i),
                d.appendChild(r),
                (r = document.createElement('td')),
                (u = document.createTextNode('0.2')),
                r.setAttribute('id', 'tau_IR_val_' + n),
                r.appendChild(u),
                d.appendChild(r),
                a.appendChild(d),
                (d = document.createElement('tr')),
                (r = document.createElement('td')),
                (u = document.createTextNode('Vis')),
                r.appendChild(u),
                d.appendChild(r),
                (r = document.createElement('td')),
                (i = document.createElement('input')).setAttribute('type', 'range'),
                i.setAttribute('min', '0'),
                i.setAttribute('max', '1'),
                i.setAttribute('step', '0.01'),
                i.setAttribute('value', '0.8'),
                i.setAttribute('data-tau', 'Vis'),
                i.setAttribute('data-index', n),
                i.setAttribute('id', 't_Vis_' + n),
                r.appendChild(i),
                d.appendChild(r),
                (r = document.createElement('td')),
                (u = document.createTextNode('0.8')),
                r.setAttribute('id', 'tau_Vis_val_' + n),
                r.appendChild(u),
                d.appendChild(r),
                a.appendChild(d);
        }
        t.appendChild(a), (e.innerHTML = ''), e.appendChild(t);
    }),
    (SET.changeValueIrAndVis = function () {
        [...document.querySelectorAll('#eachStratum input')].forEach((e) => {
            e.addEventListener('input', () => {
                'IR' === e.dataset.tau
                    ? ((SET.stratumVal[parseInt(e.dataset.index)].ir = e.value),
                      (document.querySelector(
                          '#tau_IR_val_' + e.dataset.index,
                      ).innerText = e.value))
                    : ((SET.stratumVal[parseInt(e.dataset.index)].vis = e.value),
                      (document.querySelector(
                          '#tau_Vis_val_' + e.dataset.index,
                      ).innerText = e.value));
            });
        });
    });
