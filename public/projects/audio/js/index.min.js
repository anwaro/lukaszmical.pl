let gl;function initGL(e){try{(gl=e.getContext("experimental-webgl")).viewportWidth=e.width,gl.viewportHeight=e.height}catch(e){}gl||alert("Could not initialise WebGL, sorry :-(")}function getShader(e,r){r=document.getElementById(r);if(!r)return null;let t="",i=r.firstChild;for(;i;)3===i.nodeType&&(t+=i.textContent),i=i.nextSibling;let a;if("x-shader/x-fragment"===r.type)a=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==r.type)return null;a=e.createShader(e.VERTEX_SHADER)}return e.shaderSource(a,t),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(alert(e.getShaderInfoLog(a)),null)}let shaderProgram;function initShaders(){var e=getShader(gl,"shader-fs"),r=getShader(gl,"shader-vs");shaderProgram=gl.createProgram(),gl.attachShader(shaderProgram,r),gl.attachShader(shaderProgram,e),gl.linkProgram(shaderProgram),gl.getProgramParameter(shaderProgram,gl.LINK_STATUS)||alert("Could not initialise shaders"),gl.useProgram(shaderProgram),shaderProgram.vertexPositionAttribute=gl.getAttribLocation(shaderProgram,"aVertexPosition"),gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute),shaderProgram.pMatrixUniform=gl.getUniformLocation(shaderProgram,"uPMatrix"),shaderProgram.mvMatrixUniform=gl.getUniformLocation(shaderProgram,"uMVMatrix")}let mvMatrix=mat4.create(),pMatrix=mat4.create();function setMatrixUniforms(){gl.uniformMatrix4fv(shaderProgram.pMatrixUniform,!1,pMatrix),gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform,!1,mvMatrix)}let triangleVertexPositionBuffer,squareVertexPositionBuffer;function initBuffers(){triangleVertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,triangleVertexPositionBuffer);var e=[0,1,0,-1,-1,0,1,-1,0];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),triangleVertexPositionBuffer.itemSize=3,triangleVertexPositionBuffer.numItems=3,squareVertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,squareVertexPositionBuffer),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),squareVertexPositionBuffer.itemSize=3,squareVertexPositionBuffer.numItems=4}function drawScene(){gl.viewport(0,0,gl.viewportWidth,gl.viewportHeight),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),mat4.perspective(45,gl.viewportWidth/gl.viewportHeight,.1,100,pMatrix),mat4.identity(mvMatrix),mat4.translate(mvMatrix,[-1.5,0,-7]),gl.bindBuffer(gl.ARRAY_BUFFER,triangleVertexPositionBuffer),gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,triangleVertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),setMatrixUniforms(),gl.drawArrays(gl.TRIANGLES,0,triangleVertexPositionBuffer.numItems),mat4.translate(mvMatrix,[3,0,0]),gl.bindBuffer(gl.ARRAY_BUFFER,squareVertexPositionBuffer),gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,squareVertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),setMatrixUniforms(),gl.drawArrays(gl.TRIANGLE_STRIP,0,squareVertexPositionBuffer.numItems)}function webGLStart(){initGL(document.getElementById("lesson01-canvas")),initShaders(),initBuffers(),gl.clearColor(0,0,0,1),gl.enable(gl.DEPTH_TEST),drawScene()}$$.load(function(){webGLStart()});