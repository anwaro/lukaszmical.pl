colorpicker=function(e,s){var u,p=document.getElementById(e),h=34,f=[150,50],e=".colorPicker{position:absolute;z-index:9999;bottom:-225px;height:225px;width:275px;background:#282828;display:none}.colorPickerArea{float: left;height:200px;width:200px;margin:12.5px}.colorPickerBar{float:left;height:155px;width:40px;margin-top:10px;}.colorPickerColor{height:40px; width:40px;margin-top:10px;float:left;}",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style"),o=(n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),x("div",{className:"colorPicker"})),i=x("canvas",{className:"colorPickerArea",height:200,width:200}),r=x("canvas",{className:"colorPickerBar",height:155,width:40}),e=x("canvas",{className:"colorPickerColor",height:40,width:40}),g=i.getContext("2d"),m=r.getContext("2d"),v=e.getContext("2d"),k=(o.appendChild(i),o.appendChild(r),o.appendChild(e),p.appendChild(o),function(){for(var e=[],t=10,n=0;n<260;n+=t)e.push([255,0,n]);for(n=250;0<n;n-=t)e.push([n,0,255]);for(n=0;n<260;n+=t)e.push([0,n,255]);for(n=255;0<n;n-=t)e.push([0,255,n]);for(n=0;n<260;n+=t)e.push([n,255,0]);for(n=255;0<n;n-=t)e.push([255,n,0]);return e}()),a=!1,l=!1;function c(e){var t=i.getBoundingClientRect();f[0]=parseInt(e.clientX-t.left),f[1]=parseInt(e.clientY-t.top),y()}function d(e){var t=r.getBoundingClientRect();h=parseInt(e.clientY-t.top),y()}function y(){m.clearRect(0,0,40,155);for(var e=0;e<k.length;e++)m.beginPath(),m.strokeStyle="rgb("+k[e][0]+", "+k[e][1]+", "+k[e][2]+")",m.lineWidth=1,m.moveTo(0,e),m.lineTo(40,e),m.stroke();var t,n,o,i=k[h],r=(255-i[0])/200,a=(255-i[1])/200,l=(255-i[2])/200;g.clearRect(0,0,200,200);for(var c=0;c<200;c++)for(var d=0;d<200;d++)g.beginPath(),t=255-c*r,t-=t*d/200,n=255-c*a,n-=n*d/200,o=255-c*l,o-=o*d/200,g.fillStyle="rgb("+parseInt(t)+", "+parseInt(n)+", "+parseInt(o)+")",g.fillRect(c,d,1,1);g.beginPath(),g.strokeStyle="rgb(100, 100, 100)",g.arc(f[0],f[1],5,0,2*Math.PI),g.stroke(),g.beginPath(),g.strokeStyle="rgb(255, 255, 255)",g.arc(f[0],f[1],6,0,2*Math.PI),g.stroke(),m.beginPath(),m.strokeStyle="rgb(0, 0, 0)",m.lineWidth=2,m.moveTo(0,h-2),m.lineTo(2,h),m.lineTo(38,h),m.lineTo(40,h+2),m.lineTo(40,h-2),m.lineTo(38,h),m.lineTo(2,h),m.lineTo(0,h+2),m.lineTo(0,h-2),m.stroke(),i=g.getImageData(f[0],f[1],1,1).data,u="rgb("+i[0]+","+i[1]+","+i[2]+")",v.beginPath(),v.fillStyle=u,v.fillRect(0,0,40,40),"function"==typeof s&&s(p,u)}function x(e,t){var n,o=document.createElement(e);for(n in t)o[n]=t[n];return o}p.addEventListener("click",function(e){o.style.display="block"}),i.addEventListener("click",c),r.addEventListener("click",d),o.addEventListener("focusout",function(){alert("ll"),o.style.display="none"}),i.addEventListener("mousedown",function(){a=!0}),r.addEventListener("mousedown",function(){l=!0}),i.addEventListener("mouseup",function(){a=!1}),r.addEventListener("mouseup",function(){l=!1}),i.addEventListener("mousemove",function(e){a&&c(e)}),r.addEventListener("mousemove",function(e){l&&d(e)}),i.addEventListener("mouseleave",function(){a=!1}),r.addEventListener("mouseleave",function(){l=!1}),document.addEventListener("click",function(e){if((e=e.target).isSameNode(p)||e.isSameNode(o)||e.parentNode.isSameNode(o))return!0;o.style.display="none"}),y()};var n=document.querySelector("#rgb");colorpicker("picker",function(e,t){e.style.background=t,n.value=t});