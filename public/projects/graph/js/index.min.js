function setProp(){var t,e=_graph.getSettings(),a=document.getElementsByClassName("graph-setting")[0];for(t in e){var r,n=document.createElement("input"),l=(n.classList.add("graph-check"),n.type="checkbox",/true|false/i.test(e[t])?((r=document.createElement("button")).classList.add("switcher"),r.classList.add(e[t]),r.addEventListener("click",function(){switcher(this)})):(r=document.createElement("input"),/color/i.test(t)&&(r.type="color")),r.value=e[t],r.classList.add("graph-val"),document.createElement("span")),i=(l.classList.add("graph-prop"),l.innerHTML=t,document.createElement("div"));i.classList.add("graph-props"),i.appendChild(n),i.appendChild(l),i.appendChild(r),a.appendChild(i)}}function switcher(t){"true"===t.value?(t.value="false",t.classList.remove("true"),t.classList.add("false")):(t.value="true",t.classList.remove("false"),t.classList.add("true"))}function addData(){var t=document.createElement("div"),e=document.createElement("input"),a=document.createElement("input"),r=document.createElement("div");t.classList.add("graph-values"),e.classList.add("graph-label"),a.classList.add("graph-val"),r.classList.add("graph-del"),r.addEventListener("click",function(){delData(this)}),t.appendChild(e),t.appendChild(a),t.appendChild(r),document.getElementsByClassName("graph-data")[0].appendChild(t)}function delData(t){t=t.parentElement;t.parentNode.removeChild(t)}function drawGraph(){var t=[],e="var data = [",a={},r=document.getElementsByClassName("graph-values");for(n in r)"object"==typeof(l=r[n])&&(t.push([l.children[0].value,parseFloat(l.children[1].value)]),e+='\n\t["'+l.children[0].value+'", '+l.children[1].value+"],");e=e.substring(0,e.length-1),e+="\n];\nvar settings = {";var n,l,i=document.getElementsByClassName("graph-props"),s=!1;for(n in i)"object"==typeof(l=i[n])&&l.children[0].checked&&(s=!0,a[l.children[1].textContent]=isBool(l.children[2].value),e+="\n\t"+l.children[1].textContent+' : "'+l.children[2].value+'",');e=(s?e.substring(0,e.length-1):e)+"\n};\ndocument.getElementById('graph-own').graph(data, settings);",codeMirrorJsOwn.setValue(e);var d=document.getElementById("graph-own");d.graph(t,a),d.scrollIntoView({block:"start",behavior:"smooth"})}function isBool(t){return"false"!==t&&("true"===t||(/^[\-\+]?[0-9]*(\.[0-9]+)?$/.test(t)?parseFloat(t):t))}_graph=new function(){var E,S;function T(t,e){return t[0]<e[0]?-1:e[0]<t[0]?1:0}function x(t,e){return t[1]<e[1]?-1:e[1]<t[1]?1:0}function L(t,e,a,r,n,l){S.textAlign="center",S.font=graph.defaultsetings.valSize+"px Courier New",l?n?(S.textBaseline="bottom",S.fillText(t,e+r/2,a-graph.col.margin)):(S.fillStyle="white",S.textBaseline="top",S.fillText(t,e+r/2,a+5)):(S.font=graph.defaultsetings.labelSize+"px Courier New",S.textBaseline="top",S.fillStyle=graph.defaultsetings.labelColor,S.fillText(t,e+r/2,a))}function B(t,e){var a=graph.col.color[t%graph.col.color.length],r=e;(a=String(a).replace(/[^0-9a-f]/gi,"")).length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),r=r||0;for(var n,l="#",i=0;i<3;i++)n=parseInt(a.substr(2*i,2),16),l+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*r),255)).toString(16))).substr(n.length);return l}graph={data:{},col:{color:["#EF6969","#93EC30","#ECB230","#30ECDB","#9B30EC","#B12485","#2470B1"]}},this.init=function(t,e,a){E=t,graph.defaultsetings.canvasWidth=E.width,graph.defaultsetings.canvasHeight=E.height,S=E.getContext("2d");var r=a;if("object"==typeof r)for(var n in r)graph.defaultsetings[n]=r[n];for(var t=e,l=t,i=l[0][1],s=0;s<l.length;s++)l[s][1]>i&&(i=l[s][1]);graph.data.max=i;for(var d=t,o=d[0][1],g=0;g<d.length;g++)d[g][1]<o&&(o=d[g][1]);graph.data.min=o,graph.data.data=t,graph.defaultsetings.sortByLabel&&(graph.data.data=t.sort(T)),graph.defaultsetings.sortByValue&&(graph.data.data=t.sort(x)),graph.data.len=t.length,E.width=graph.defaultsetings.canvasWidth,E.height=graph.defaultsetings.canvasHeight;var a=graph.defaultsetings.canvasWidth-2*graph.defaultsetings.margin,a=(a/=graph.data.len,graph.col.margin=.1*a,graph.col.width=.8*a,graph.col.x=a,graph.defaultsetings.canvasHeight-2*graph.defaultsetings.margin),h=(a=(a-=graph.defaultsetings.title?20+graph.defaultsetings.titleSize:0)-graph.defaultsetings.labelSize,graph.defaultsetings.threeD&&(a-=graph.col.margin,graph.col.width-=graph.col.margin/graph.data.len),graph.col.y=a,graph.col.ratio=a/graph.data.max,S.fillStyle=graph.defaultsetings.bgColor,S.fillRect(0,0,graph.defaultsetings.canvasWidth,graph.defaultsetings.canvasHeight),graph.defaultsetings.borderWidth&&(S.strokeStyle=graph.defaultsetings.borderColor,S.lineWidth=2*graph.defaultsetings.borderWidth,S.beginPath(),S.moveTo(0,0),S.lineTo(0,graph.defaultsetings.canvasHeight),S.lineTo(graph.defaultsetings.canvasWidth,graph.defaultsetings.canvasHeight),S.lineTo(graph.defaultsetings.canvasWidth,0),S.lineTo(0,0),S.stroke()),graph.defaultsetings.margin+graph.defaultsetings.titleSize);graph.defaultsetings.threeD&&(h+=graph.col.margin),h+=graph.defaultsetings.title?20:0;for(var p=graph.defaultsetings.margin,c=0,u=0;u<graph.data.data.length;u++){p+=graph.col.margin,c=graph.col.y-graph.data.data[u][1]*graph.col.ratio+h;{f=void 0;v=void 0;m=void 0;C=void 0;b=void 0;y=void 0;w=void 0;var f=p;var v=c;var m=graph.col.width;var C=graph.data.data[u][1]*graph.col.ratio;var b=graph.col.margin;var y=u;var w=graph.defaultsetings.threeD;S.save(),S.beginPath(),S.lineWidth=1,S.fillStyle=B(y,0),S.strokeStyle=B(y,0),S.moveTo(f,v),S.lineTo(f,v+C),S.lineTo(f+m,v+C),S.lineTo(f+m,v),S.lineTo(f,v),S.stroke(),S.fill(),S.restore(),w&&(S.fillStyle=B(y,-.2),S.strokeStyle=B(y,0),S.beginPath(),S.moveTo(f,v),S.lineTo(f+b,v-b),S.lineTo(f+m+b,v-b),S.lineTo(f+m,v),S.lineTo(f,v),S.stroke(),S.fill(),S.beginPath(),S.moveTo(f+m,v),S.lineTo(f+m+b,v-b),S.lineTo(f+m+b,v+C-b),S.lineTo(f+m,v+C),S.lineTo(f+m,v),S.stroke(),S.fill())}L(graph.data.data[u][1],p,c,graph.col.width,graph.data.data[u][1]<graph.data.max/2,1),L(graph.data.data[u][0],p,h+graph.col.y,graph.col.width,0,0),p=(p+=graph.col.width)+graph.col.margin}""!==graph.defaultsetings.title&&(S.textAlign="center",S.textBaseline="top",S.fillStyle=graph.defaultsetings.titleColor,S.font=graph.defaultsetings.titleSize+"px Courier New",S.fillText(graph.defaultsetings.title,graph.defaultsetings.canvasWidth/2,graph.defaultsetings.margin))},this.getSettings=function(){return graph.defaultsetings},graph.defaultsetings={title:" ",titleSize:25,titleColor:"",bgColor:"#C5C5C5",margin:5,labelSize:20,labelColor:"black",valSize:20,borderWidth:1,borderColor:"#282828",sortByValue:!1,sortByLabel:!1,threeD:!1,canvasWidth:300,canvasHeight:300}},HTMLCanvasElement.prototype.graph=function(t,e){_graph.init(this,t,e)},function(){var t='var data = [\n\t["Pon",2],\n\t["Wt",5],\n\t["Śro", 1],\n\t["Czw", 7],\n\t["Pią", 4],\n\t["Sob", 3],\n\t["Nied", 3]\n];\n\n';t+='document.getElementById("graph1").graph(data,{\n\t"canvasHeight":300\n\t"canvasWidth":500\n});',(myCodeMirror=CodeMirror($$("#js_graph1"),{lineNumbers:!0,readOnly:!0})).setValue(t);$$("#graph1").graph([["Pon",2],["Wt",5],["Śro",1],["Czw",7],["Pią",4],["Sob",3],["Nied",3]],{canvasHeight:300,canvasWidth:500}),codeMirrorJsOwn=CodeMirror($$("#js-graph-own"),{lineNumbers:!0,readOnly:!0}),t="<html>\n\t<head>\n\t\t.\n\t\t.\n\t\t",t+='<script src="https://lukaszmical.pl/projects/graph/js/graph.js"><\/script> \n\t\t.\n\t\t.\n\t</head>\n\t<body>\n\t\t.\n\t\t.\n\t\t<canvas id="graph-own" height="300" width="500"></canvas>\n\t\t.\n\t\t.\n\t</body>\n</html>',(codeMirrorHtmlOwn=CodeMirror($$("#html-graph-own"),{lineNumbers:!0,readOnly:!0,mode:"text/html"})).setValue(t),setProp()}(),document.querySelector(".draw-graph").addEventListener("click",drawGraph),document.querySelector(".draw-graph-2").addEventListener("click",drawGraph),document.querySelector(".graph-add").addEventListener("click",addData);