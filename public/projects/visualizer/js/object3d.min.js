function Point(t,i,s){this.x="object"==typeof t?t.x:t||0,this.y="object"==typeof t?t.y:i||0,this.z="object"==typeof t?t.z:s||0,this.set=function(t,i,s){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=i||0,this.z=s||0),this},this.dist2d=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},this.dist3d=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2)+Math.pow(t.z-this.z,2))}}function Vertex(t,i,s){Point.call(this,t,i,s),this.current=new Point(t,i,s),this.angle2D=function(){var t=Math.atan2(this.y,this.x);return t>0?t:2*PI+t},this.rotate=function(t){return this.set(t.dotProduct(this.current)),this},this.len=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},this.norm=function(){return this.multiply(1/this.len())},this.normThis=function(){return this.multiplyThis(1/this.len()),this},this.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},this.crossProduct=function(t){return new Vertex(this.y*t.z-t.y*this.z,this.z*t.x-t.z*this.x,this.x*t.y-t.x*this.y)},this.update=function(){return this.set(this.current),this},this.toVertex=function(t){return new Vertex(t.x-this.x,t.y-this.y,t.z-this.z)},this.add=function(t){return new Vertex(t.x+this.x,t.y+this.y,t.z+this.z)},this.addThis=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},this.subtract=function(t){return new Vertex(this.x-t.x,this.y-t.y,this.z-t.z)},this.subtractThis=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},this.multiply=function(t){return new Vertex(t*this.x,t*this.y,t*this.z)},this.multiplyThis=function(t){return this.x*=t,this.y*=t,this.z*=t,this},this.str=function(){return"Vertex{x: "+this.x+", y: "+this.y+", z: "+this.z+" }"}}function Matrix(t,i,s){this.v1=t,this.v2=i,this.v3=s,this.result=new Point,this.dotProduct=function(t){return this.result.x=this.v1.x*t.x+this.v1.y*t.y+this.v1.z*t.z,this.result.y=this.v2.x*t.x+this.v2.y*t.y+this.v2.z*t.z,this.result.z=this.v3.x*t.x+this.v3.y*t.y+this.v3.z*t.z,this.result},this.updateMatrix=function(t,i){var s=cos(i),h=sin(i),n=1-s,e=t.x,r=t.y,o=t.z;this.v1.set(n*e*e+s,n*e*r-o*h,n*e*o+r*h),this.v2.set(n*e*r+o*h,n*r*r+s,n*r*o-e*h),this.v3.set(n*e*o-r*h,n*r*o+e*h,n*o*o+s)}}function Polygon(t){this.vertexs=t,this.len=t.length,this.angle=0,this.show=!0,this.normal=new Vertex,this.calcNormal=function(){return this.normal.set(this.get(2).toVertex(this.get(1)).crossProduct(this.get(2).toVertex(this.get(3)))),this},this.average=function(){return this.vertexs.reduce((function(t,i){return t.add(i)})).multiply(1/this.len)},this.rotate=function(t){return this.vertexs.forEach((function(i){i.rotate(t)})),this.calcNormal(),this},this.update=function(){return this.vertexs.forEach((function(t){t.update()})),this},this.get=function(t){return this.vertexs[t]},this.isShow=function(){return this.normal.z>0}}Vertex.prototype=Object.create(Point.prototype),Vertex.prototype.constructor=Vertex;