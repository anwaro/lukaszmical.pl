function Point(t,i){this.x=t||0,this.y=i||0}function Box(t,i,n){this.el=t,this.old=new Point(i,n),this.direction=new Point,this.current=new Point(i,n),this.step=new Point}($$div=new function(){var c=[],o=[],s=[],d=100,a=!1;function r(){if(!a){a=!0;for(var t,i=function(t){var i=[],n=JSON.parse(JSON.stringify(t));for(;n.length;){var e=Math.floor(Math.random()*n.length);i.push(n[e]),n.splice(e,1)}return i}(o),n=0,e=0;n<s.length;n++){t=n%5,n&&!t&&e++;var r=c[i[n]-1];r.direction.x=t*d,r.direction.y=e*d,r.step.x=(r.direction.x-r.current.x)/50,r.step.y=(r.direction.y-r.current.y)/50}h()}}function l(){if(!a){a=!0;for(var t=0;t<s.length;t++){var i=c[t];i.direction.x=i.old.x,i.direction.y=i.old.y,i.step.x=(i.direction.x-i.current.x)/50,i.step.y=(i.direction.y-i.current.y)/50}h()}}function h(){for(var t=!0,i=0;i<c.length;i++){var n=c[i];Math.abs(n.direction.x-n.current.x)>2*Math.abs(n.step.x)?(t=!1,n.current.x+=n.step.x):n.current.x=n.direction.x,Math.abs(n.direction.y-n.current.y)>2*Math.abs(n.step.y)?(t=!1,n.current.y+=n.step.y):n.current.y=n.direction.y,n.el.css({left:n.current.x+"px",top:n.current.y+"px"})}t?a=!1:window.setTimeout(h,20)}this.init=function(){for(var t in(alldiv=$$("#allDivs")).addEventListener("click",r,!1),$$("#reset").addEventListener("click",l,!1),alldiv.childNodes)"DIV"===alldiv.childNodes[t].tagName&&(s.push(alldiv.childNodes[t]),o.push(s.length));for(var i,t=0,n=0;t<s.length;t++){i=t%5,t&&!i&&n++;var e=$$("#div"+(t+1));e.css({top:n*d+"px",left:i*d+"px",background:"url(https://c2.staticflickr.com/6/5447/9001563192_c745c5d275.jpg) -"+i*d+"px -"+n*d+"px"}),c.push(new Box(e,i*d,n*d))}}}).init();