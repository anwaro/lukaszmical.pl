function r(t,i){this.x=t||0,this.y=i||0}function u(t,i,e){this.el=t,this.old=new r(i,e),this.direction=new r,this.current=new r(i,e),this.step=new r}($$div=new function(){var c=[],o=[],s=[],d=100,a=!1;function n(){if(!a){a=!0;for(var t,i=function(t){var i=[],e=JSON.parse(JSON.stringify(t));for(;e.length;){var r=Math.floor(Math.random()*e.length);i.push(e[r]),e.splice(r,1)}return i}(o),e=0,r=0;e<s.length;e++){t=e%5,e&&!t&&r++;var n=c[i[e]-1];n.direction.x=t*d,n.direction.y=r*d,n.step.x=(n.direction.x-n.current.x)/25,n.step.y=(n.direction.y-n.current.y)/25}h()}}function l(){if(!a){a=!0;for(var t=0;t<s.length;t++){var i=c[t];i.direction.x=i.old.x,i.direction.y=i.old.y,i.step.x=(i.direction.x-i.current.x)/25,i.step.y=(i.direction.y-i.current.y)/25}h()}}function h(){for(var t=!0,i=0;i<c.length;i++){var e=c[i];Math.abs(e.direction.x-e.current.x)>2*Math.abs(e.step.x)?(t=!1,e.current.x+=e.step.x):e.current.x=e.direction.x,Math.abs(e.direction.y-e.current.y)>2*Math.abs(e.step.y)?(t=!1,e.current.y+=e.step.y):e.current.y=e.direction.y,e.el.css({left:e.current.x+"px",top:e.current.y+"px"})}t?a=!1:window.setTimeout(h,20)}this.init=function(){for(var t in(alldiv=$$("#allDivs")).addEventListener("click",n,!1),$$("#reset").addEventListener("click",l,!1),alldiv.childNodes)"DIV"===alldiv.childNodes[t].tagName&&(s.push(alldiv.childNodes[t]),o.push(s.length));for(var i,t=0,e=0;t<s.length;t++){i=t%5,t&&!i&&e++;var r=$$("#div"+(t+1));r.css({top:e*d+"px",left:i*d+"px",background:"url(https://c2.staticflickr.com/6/5447/9001563192_c745c5d275.jpg) -"+i*d+"px -"+e*d+"px"}),c.push(new u(r,i*d,e*d))}}}).init();