var canvas,ctx,sx,sy,sa,canvasWidth=700,canvasHeight=500,len=100,l1=.8,l2=.7,a1=.4,a2=.6;function init(){$$("#newDraw").addEvent("click",newDraw),(canvas=$$("#gen")).height=canvasHeight,canvas.width=canvasWidth,canvas&&canvas.getContext&&((ctx=canvas.getContext("2d")).fillStyle="rgb(200, 200, 230)",ctx.fillRect(0,0,canvasWidth,canvasHeight),draw(canvasWidth/2,canvasHeight,len,Math.PI/2))}function newDraw(){sx=Number($$("#startX").value||canvasWidth/2),sy=Number($$("#startY").value||canvasHeight),sl=Number($$("#startL").value||100),sa=Number($$("#startA").value||Math.PI/2),l1=Number($$("#l1").value||.8),l2=Number($$("#l2").value||.7),a1=Number($$("#a1").value||.4),a2=Number($$("#a2").value||.6),ctx.fillStyle="rgb(200, 200, 230)",ctx.fillRect(0,0,canvasWidth,canvasHeight),draw(sx,sy,sl,sa)}function draw(a,t,c,n){if(c<2)return 0;var s=a+c*Math.cos(n),e=t-c*Math.sin(n);ctx.beginPath(),ctx.strokeStyle=c<5?"green":"black",ctx.lineWidth=1/6*c,ctx.moveTo(a,t),ctx.lineTo(s,e),ctx.stroke(),draw(s,e,c*l1,n+a1),draw(s,e,c*l2,n-a2)}$$.load(init);var canvasM,ctxM,canvasWidthMagic=700,canvasHeightMagic=500,possX=possY=mouseX=mouseY=55,r=50,pf=10;function magic(){(canvasM=$$("#this-is-kind-of-magic")).addEvent("mousemove",mousePoss),canvasM.height=canvasHeightMagic,canvasM.width=canvasWidthMagic,canvasM&&canvasM.getContext&&((ctxM=canvasM.getContext("2d")).fillStyle="rgb(0, 0, 0)",ctxM.fillRect(0,0,canvasWidthMagic,canvasHeightMagic),setInterval(drawMagic,1e3/60))}function drawMagic(){possX+=.06*(mouseX-possX),possY+=.06*(mouseY-possY),ctxM.fillStyle="rgba(0, 0, 0, 0.04)",ctxM.fillRect(0,0,canvasWidthMagic,canvasHeightMagic);for(var a=0;a<pf;a++){ctxM.beginPath();var t=rand(possX,possY);ctxM.fillStyle=randomColor(),ctxM.arc(t[0],t[1],2,0,2*Math.PI),ctxM.fill()}}function mousePoss(a){var t=canvasM.getBoundingClientRect();mouseX=a.clientX-t.left,mouseY=a.clientY-t.top}function rand(a,t){var c=Math.random()*r,n=2*Math.random()*Math.PI;return[a+c*Math.sin(n),t+c*Math.cos(n)]}function randomColor(){for(var a="0123456789ABCDEF".split(""),t="#",c=0;c<6;c++)t+=a[Math.floor(16*Math.random())];return t}magic();