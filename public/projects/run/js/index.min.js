let o=[],n=[],r={h:null,min:null,sec:null},a={km:null,m:null},i={km_h:null,m_s:null},u={min:null,sec:null},p={renderPeriod:0,timeout:500,body:null,header:{top:null,side:null},style:null,activeRow:-1,activeCol:-1};function t(e){var t,e=e.target;"td"===e.tagName.toLowerCase()&&(t=e.cellIndex+1,e=e.parentNode.rowIndex+1,t!==p.activeCol||e!==p.activeRow)&&1<e&&1<t&&(p.style.innerHTML=`.table-body .table-main table tr:nth-child(${e}) {
                    background-color: rgba(255, 255, 255, 0.7);
                    color: black;
                 }
                 .table-body .table-main table tr td:nth-child(${t}) { 
                     background-color: rgba(255, 255, 255, 0.7); 
                     color: black; 
                 }`)}function e(){p.activeRow=-1,p.activeCol=-1,p.style.innerHTML=""}function A(){if(2===o.length){p.renderPeriod=V(p.timeout);let e,n,r;var t=[o[0].dataset.type,o[1].dataset.type],a=y(),i=k(),u=W(),d=z();if(w("period","distance",t)){if(!s(u,d))return;r="pace",e="distance",n="period",m(f(r,d,e,u,n)),l(d/u)}else if(w("period","pace",t)){if(!s(u,i))return;r="distance",e="period",n="pace",v(f(r,u,e,i,n))}else if(w("period","speed",t)){if(!s(u,a))return;r="distance",e="period",n="speed",v(f(r,u,e,a,n))}else if(w("distance","pace",t)){if(!s(d,i))return;r="period",e="distance",n="pace",c(f(r,d,e,i,n))}else{if(!w("distance","speed",t))return;if(!s(d,a))return;r="period",e="distance",n="speed",c(f(r,d,e,a,n))}setTimeout(function(){var t,a=e,i=n,u=r;if(V()>p.renderPeriod){m=X(a,function(){var e=B(p.body.offsetWidth/60-11/6)-1;return Math.min(10,Math.max(3,e))}()),t=X(i,20);{var d=u,o=m,s=a,c=t,l=i;let n,r,e=function(t,n){let r=P("");for(let e=0;e<t.length;e++)r+=P(h(n,t[e]));return Y(r)}(o,s);for(let t=0;t<c.length;t++){n=P(h(l,c[t]));for(let e=0;e<o.length;e++)r=f(d,o[e],s,c[t],l),n+=P(h(d,r));e+=Y(n)}p.body.innerHTML=e}var u=a,m=i;p.header.top.innerHTML=label[u],p.header.side.innerHTML=label[m]}},p.timeout+200)}}function s(e,t){return 0<e&&0<t}function f(e,t,n,r,a){return 0===t||0===r?0:"pace"===e&&"distance"===n&&"period"===a?H(t/r):"distance"===e&&"period"===n&&"pace"===a?t/r*1e3:"distance"===e&&"period"===n&&"speed"===a?t*r:"period"===e&&"distance"===n&&"pace"===a?t*r/1e3:"period"===e&&"distance"===n&&"speed"===a?t/r:void 0}function h(e,t){var n;return"period"===e?(0!==(n=O(t)).h?n.h+":":"")+d(n.min)+":"+d(n.sec):"distance"===e?(n=D(t)).km+"km "+(0!==n.m?n.m+"m":""):"speed"===e?R(C(t),3)+"km/h":"pace"===e?d((n=S(t)).min)+"':"+d(n.sec)+'"':void 0}function d(e){return e=e<10?"0"+e:e}function c(e){e=O(e);r.h.value=e.h,r.min.value=e.min,r.sec.value=e.sec}function l(e,t){(t=t||!1)?"m_s"===t?i.m_s.value=L(e):"km_h"===t&&(i.km_h.value=L(e)):(i.m_s.value=L(e),i.km_h.value=L(C(e)))}function m(e){e=S(e);u.min.value=e.min,u.sec.value=e.sec}function v(e){e=D(e);a.km.value=e.km,a.m.value=e.m}function D(e){let t=I(e/1e3);return 1e3===(e=B(e-=1e3*t))&&(e=0,t++),{km:t,m:e}}function O(e){var t=I(e/3600),n=I((e-=3600*t)/60);return $({h:t,min:n,sec:e-=60*n})}function S(e){var t=I(e/60);return $({h:0,min:t,sec:e-=60*t})}function $(e){return e.sec=B(e.sec),60===e.sec&&(e.sec=0,e.min++),60===e.min&&(e.min=0,e.h++),e}function z(){return 1e3*g(a.km)+g(a.m)}function y(e){return g("m_s"===(e=e||"m_s")?i.m_s:i.km_h)}function W(){return 3600*g(r.h)+60*g(r.min)+g(r.sec)}function k(){return 60*g(u.min)+g(u.sec)}function g(e){e=E(e.value);return isNaN(e)?0:e}function j(e,t,n){return e[t]&&e[t].dataset.type===n}function G(){var e=this.dataset.type;let t;"distance"===e?(a.km.value=this.dataset.km,a.m.value=this.dataset.m,t=a.km):"pace"===e?(u.min.value=this.dataset.min,u.sec.value=this.dataset.sec,t=u.min):"period"===e?(r.h.value=this.dataset.h,r.min.value=this.dataset.min,r.sec.value=this.dataset.sec,t=r.h):"speed"===e&&(i.km_h.value=this.dataset.km_h,i.m_s.value=this.dataset.m_s,t=i.km_h),b(t),_(t,0)}function b(e){var e=function e(t,n){let r=t.parentNode;if(r)return r.classList.contains(n)?r:e(r,n);return null}(e=e.target||e,"input-area"),t=e.dataset.type,t="pace"===t?"speed":"speed"===t&&"pace",t=(t&&(j(o,1,t)&&o.splice(1,1),j(o,0,t))&&o.splice(0,1),e.classList.contains("active")||(e.classList.add("active"),o.push(e)),o.length-2);0<t&&o.splice(0,t),e.dataset.type===o[0].dataset.type&&(o=o.reverse());for(let e=0;e<n.length;e++)n[e].classList.remove("active");for(let e=0;e<o.length;e++)o[e].classList.add("active")}function J(e){e=e.keyCode||e.charCode;let t=this;if(38===e)_(t,1);else{if(40!==e)return T(e,[46,8,9,27,13,110,188,190])?(setTimeout(function(){_(t,0)},100),!0):(setTimeout(function(){_(t,0)},100),48<=e&&e<=57||96<=e&&e<=105);_(t,-1)}}function _(t,n){let e=t.value.replace(",",".");if("."!==e.slice(-1)&&(e=E(e)+n,n=M(t.dataset.max),(e=e<=0?0:e)>=n)&&(e=n),t.value=e,t.dataset&&t.dataset.hasOwnProperty("type")){n=t.dataset.type;let e;"s_km"===n?l(0===(t=k())?0:1e3/t):"km_h"===n?(l(e=N(y("km_h")),"m_s"),m(H(e))):"m_s"===n&&(l(C(e=y("m_s")),"km_h"),m(H(e)))}A()}function E(e){return K(parseFloat(+e))}function K(e){return isNaN(e)?0:e}function L(e){var t;return t=M(e)-E(e).toFixed(1),Math.abs(t)<.1?M(e):E(e).toFixed(1)}function M(e){return K(parseInt(+e))}function I(e){return Math.floor(e)}function B(e){return Math.round(e)}function T(e,t){return-1!==t.indexOf(e)}function w(e,t,n){return T(e,n)&&T(t,n)}function Q(e){return Math.max.apply(null,e)}function U(e){return Math.min.apply(null,e)}function x(e){return e.sort(function(e,t){return e-t})}function C(e){return 3.6*e}function N(e){return e/3.6}function H(e){return 0===e?0:1e3/e}function V(e){return e=e||0,(new Date).getTime()+e}function X(t,n){var e,r,a;if("period"===t)return r=W(),e=n,a=F(a=60*B(r/60),30*e,e,10,2e6),T(r,a)||a.push(r),x(a);if("pace"===t)return F(k(),n/2,n,120,600);if("speed"!==t)return"distance"===t?(e=z(),r=n,a=[21097,42195],U(t=F(t=1e3*B(e/1e3),500*r,r,1e3,2e5))<a[0]&&a[0]<Q(t)&&t.push(a[0]),U(t)<a[1]&&a[1]<Q(t)&&t.push(a[1]),T(e,t)||t.push(e),x(t)):void 0;{t=y("km_h");let e=F(t,n/4,n,1,30);e=e.map(N),T(N(t),e)||e.push(N(t));return x(e)}}function Y(e){return"<tr>"+e+"</tr>"}function P(e){return"<td>"+e+"</td>"}function F(e,t,n,r,a){e=R(e=a<(e=e<r?r:e)?a:e);var r=Math.max(e-t,r),i=R(((u=Math.min(e+t,a))-r)/n),r=e-M((e-r)/i)*i,u=e+M((u-e)/i)*i,d=[];for(let e=r;e<=u;e+=i)d.push(R(e,5));return d}function R(e,t){t=t-1||1,e=E(e);let n=0;for(;e<Math.pow(10,t);)e*=10,n++;return Math.round(e)/Math.pow(10,n)}label={period:"Czas",speed:"Prędkość",pace:"Tempo",distance:"Dystans"},p.style=document.createElement("style"),document.head.appendChild(p.style);var q=document.getElementsByTagName("input");for(let e=0;e<q.length;e++)"text"===q[e].type?(q[e].addEventListener("keydown",J),q[e].addEventListener("focus",b)):"button"===q[e].type&&q[e].addEventListener("click",G);r.h=document.getElementById("run-period-h"),r.min=document.getElementById("run-period-m"),r.sec=document.getElementById("run-period-s"),a.km=document.getElementById("run-distance-km"),a.m=document.getElementById("run-distance-m"),u.min=document.getElementById("run-pace-m"),u.sec=document.getElementById("run-pace-s"),i.km_h=document.getElementById("run-speed-km-h"),i.m_s=document.getElementById("run-speed-m-s"),n=document.querySelectorAll(".input-area"),p.body=document.getElementById("run-table-body"),p.header.top=document.getElementById("run-table-header-top"),p.header.side=document.getElementById("run-table-header-side");var Z=document.querySelectorAll("td");for(let e=0;e<Z.length;e++)Z[e].addEventListener("mouseover",t);p.body.addEventListener("mouseleave",e),p.body.addEventListener("mousemove",t),a.km.value=10,r.min.value=45,b(a.km),b(r.min),_(r.min,0);